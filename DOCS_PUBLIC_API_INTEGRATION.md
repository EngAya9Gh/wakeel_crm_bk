# ุชูุซูู API ูุฑุจุท ููุงุฐุฌ ุงููููุน ูุน ูุธุงู CRM

> **ุงูุฅุตุฏุงุฑ:** 1.0  
> **ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2026-01-24  
> **ุงูุฌูุฉ:** CRM Wakeel System

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุณุชูุฏ ูููุฑ ูุงูุฉ ุงูุชูุงุตูู ุงูุชูููุฉ ุงููุงุฒูุฉ ูุฑุจุท ููุงุฐุฌ ุงููููุน ุงูุฅููุชุฑููู (Contact Forms & Landing Pages) ูุน ูุธุงู ุงูู CRM ุจุดูู ุขูู.

ุนูุฏ ุฅุฑุณุงู ุจูุงูุงุช ุงูุนููู ูู ุงููููุนุ ุณูุชู ุชุณุฌููู ุชููุงุฆูุงู ูู ูุธุงู CRM ูู **Lead ุฌุฏูุฏ** ุฌุงูุฒ ูููุชุงุจุนุฉ ูู ูุจู ูุฑูู ุงููุจูุนุงุช.

---

## ๐ 1. ูุนูููุงุช ุงูู Endpoint

### Base URL
```
https://your-crm-domain.com/api/public/v1
```

### Endpoint ุงูุฑุฆูุณู
```
POST /leads
```

### ุงูุฑุงุจุท ุงููุงูู
```
https://your-crm-domain.com/api/public/v1/leads
```

---

## ๐ 2. ุงููุตุงุฏูุฉ (Authentication)

ูุชุทูุจ ูุฐุง ุงูู API ุงุณุชุฎุฏุงู **API Key** ูููุตุงุฏูุฉ. ูุง ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ูุณุชุฎุฏู.

### ุทุฑู ุฅุฑุณุงู ุงูู API Key

ููููู ุฅุฑุณุงู ุงูู API Key ุจุฅุญุฏู ุงูุทุฑู ุงูุชุงููุฉ:

#### ุงูุทุฑููุฉ 1: Header (ููุตู ุจูุง)
```http
X-API-Key: your_api_key_here
```

#### ุงูุทุฑููุฉ 2: Bearer Token
```http
Authorization: Bearer your_api_key_here
```

#### ุงูุทุฑููุฉ 3: Query Parameter (ุบูุฑ ููุตู ุจูุง ููุฃูุงู)
```
?api_key=your_api_key_here
```

### ุงูุญุตูู ุนูู API Key

ุณูุชู ุชุฒููุฏู ุจู API Key ุฎุงุต ุจูููุนู ูู ูุจู ูุฑูู CRM. ุงุญุชูุธ ุจู ุจุดูู ุขูู ููุง ุชุดุงุฑูู ุนููุงู.

---

## ๐ค 3. ุงูุญููู ุงููุทููุจุฉ (Request Body)

### Content-Type
```
Content-Type: application/json
```

### ุงูุจูุงูุงุช ุงููุทููุจุฉ (JSON Format)

| ุงูุญูู | ุงูููุน | ูุทููุจุ | ุงููุตู | ูุซุงู |
|------|------|--------|------|------|
| `name` | string | โ ูุนู | ุงูุงุณู ุงููุงูู ููุนููู (3-255 ุญุฑู) | `"ุฃุญูุฏ ูุญูุฏ ุนูู"` |
| `phone` | string | โ ูุนู | ุฑูู ุงูุฌูุงู ุจุตูุบุฉ ุณุนูุฏูุฉ | `"+966501234567"` ุฃู `"0501234567"` |
| `email` | string | โ ูุง | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | `"ahmed@example.com"` |
| `company` | string | โ ูุง | ุงุณู ุงูุดุฑูุฉ | `"ุดุฑูุฉ ุงูุฃูู ููุชุฌุงุฑุฉ"` |
| `address` | string | โ ูุง | ุงูุนููุงู | `"ุงูุฑูุงุถ - ุญู ุงููุฎูู"` |
| `subject` | string | โ ูุง | ุนููุงู/ููุถูุน ุงูุฑุณุงูุฉ (ูููุฐุฌ ุงุชุตู ุจูุง) | `"ุงุณุชูุณุงุฑ ุนู ุงูุฎุฏูุงุช"` |
| `message` | string | โ ูุง | ูุต ุงูุฑุณุงูุฉ (ูููุฐุฌ ุงุชุตู ุจูุง) | `"ุฃุฑุบุจ ูู ุงูุงุณุชูุณุงุฑ ุนู..."` |
| `source` | string | โ ูุนู | ูุตุฏุฑ ุงููููุฐุฌ | `"contact_form"` ุฃู `"landing_page"` |

### ููุงุญุธุงุช ูููุฉ:

1. **ุฑูู ุงูุฌูุงู:**
   - ูุฌุจ ุฃู ูููู ุจุตูุบุฉ ุณุนูุฏูุฉ (ูุจุฏุฃ ุจู `05` ุฃู `+966` ุฃู `00966` ุฃู `966`)
   - ุณูุชู ุชุญูููู ุชููุงุฆูุงู ุฅูู ุตูุบุฉ ููุญุฏุฉ (`+966xxxxxxxxx`)
   - ูุฌุจ ุฃู ูููู ูุฑูุฏุงู (ุบูุฑ ูุณุฌู ูุณุจูุงู ูู ุงููุธุงู)

2. **ุงููุตุฏุฑ (source):**
   - `contact_form`: ูููุฐุฌ ุงุชุตู ุจูุง
   - `landing_page`: ูููุฐุฌ ุตูุญุฉ ุงููุจูุท
   - `website_form`: ูููุฐุฌ ุนุงู ูู ุงููููุน

---

## ๐ฅ 4. ุฃูุซูุฉ ุนูู ุงูุทูุจุงุช (Request Examples)

### ูุซุงู 1: ูููุฐุฌ ุงุชุตู ุจูุง (Contact Form)

```bash
curl -X POST https://your-crm-domain.com/api/public/v1/leads \
  -H "Content-Type: application/json" \
  -H "X-API-Key: your_api_key_here" \
  -d '{
    "name": "ุฃุญูุฏ ูุญูุฏ ุนูู",
    "phone": "0501234567",
    "email": "ahmed@example.com",
    "subject": "ุงุณุชูุณุงุฑ ุนู ุฎุฏูุงุช ุงูุชุณููู",
    "message": "ุฃุฑุบุจ ูู ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุฎุฏูุงุช ุงูุชุณููู ุงูุฑููู ุงููุชููุฑุฉ ูุฏููู",
    "source": "contact_form"
  }'
```

### ูุซุงู 2: ูููุฐุฌ ุตูุญุฉ ุงููุจูุท (Landing Page)

```bash
curl -X POST https://your-crm-domain.com/api/public/v1/leads \
  -H "Content-Type: application/json" \
  -H "X-API-Key: your_api_key_here" \
  -d '{
    "name": "ุณุงุฑุฉ ุฃุญูุฏ",
    "phone": "+966509876543",
    "email": "sara@company.com",
    "company": "ุดุฑูุฉ ุงููุฌุงุญ",
    "source": "landing_page"
  }'
```

### ูุซุงู 3: JavaScript (Fetch API)

```javascript
const formData = {
  name: document.getElementById('name').value,
  phone: document.getElementById('phone').value,
  email: document.getElementById('email').value,
  subject: document.getElementById('subject').value,
  message: document.getElementById('message').value,
  source: 'contact_form'
};

fetch('https://your-crm-domain.com/api/public/v1/leads', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Key': 'your_api_key_here'
  },
  body: JSON.stringify(formData)
})
.then(response => response.json())
.then(data => {
  if (data.success) {
    console.log('ุชู ุงูุชุณุฌูู ุจูุฌุงุญ:', data);
    alert('ุดูุฑุงู ูุชูุงุตูู ูุนูุง! ุณูุชูุงุตู ูุนู ูุฑูุจุงู');
  } else {
    console.error('ุฎุทุฃ:', data);
    alert('ุญุฏุซ ุฎุทุฃุ ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู');
  }
})
.catch(error => {
  console.error('Error:', error);
  alert('ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู');
});
```

### ูุซุงู 4: PHP (cURL)

```php
<?php

$data = [
    'name' => $_POST['name'],
    'phone' => $_POST['phone'],
    'email' => $_POST['email'],
    'subject' => $_POST['subject'],
    'message' => $_POST['message'],
    'source' => 'contact_form'
];

$ch = curl_init('https://your-crm-domain.com/api/public/v1/leads');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'X-API-Key: your_api_key_here'
]);

$response = curl_exec($ch);
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

$result = json_decode($response, true);

if ($httpCode === 201 && $result['success']) {
    echo "ุชู ุงูุชุณุฌูู ุจูุฌุงุญ!";
} else {
    echo "ุญุฏุซ ุฎุทุฃ: " . $result['message'];
}
?>
```

---

## ๐จ 5. ุงูุงุณุชุฌุงุจุงุช ุงููุชููุนุฉ (Response Examples)

### โ ูุฌุงุญ ุงูุชุณุฌูู (201 Created)

```json
{
  "success": true,
  "message": "ุชู ุชุณุฌูู ุงูุนููู ุจูุฌุงุญ ูู ุงููุธุงู",
  "data": {
    "lead_id": 125,
    "name": "ุฃุญูุฏ ูุญูุฏ ุนูู",
    "phone": "+966501234567",
    "status": "registered"
  }
}
```

### โ ุฎุทุฃ ูู ุงูุชุญูู ูู ุงูุจูุงูุงุช (422 Unprocessable Entity)

```json
{
  "success": false,
  "message": "ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ",
  "errors": {
    "phone": [
      "ุฑูู ุงูุฌูุงู ูุณุฌู ูุณุจูุงู ูู ุงููุธุงู"
    ],
    "name": [
      "ุงูุงุณู ูุฌุจ ุฃู ูููู 3 ุฃุญุฑู ุนูู ุงูุฃูู"
    ],
    "email": [
      "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ"
    ]
  }
}
```

### โ API Key ููููุฏ (401 Unauthorized)

```json
{
  "success": false,
  "message": "API Key ูุทููุจ",
  "error": {
    "code": "MISSING_API_KEY",
    "message": "ูุฌุจ ุชุถููู API Key ูู ุงูุทูุจ"
  }
}
```

### โ API Key ุบูุฑ ุตุญูุญ (403 Forbidden)

```json
{
  "success": false,
  "message": "API Key ุบูุฑ ุตุญูุญ",
  "error": {
    "code": "INVALID_API_KEY",
    "message": "ุงูููุชุงุญ ุงูููุฏู ุบูุฑ ุตุงูุญ"
  }
}
```

### โ ุฎุทุฃ ูู ุงูุฎุงุฏู (500 Internal Server Error)

```json
{
  "success": false,
  "message": "ุญุฏุซ ุฎุทุฃ ูู ุงูุฎุงุฏู",
  "error": {
    "code": "SERVER_ERROR",
    "message": "ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ูุงุญูุงู"
  }
}
```

---

## ๐ข 6. ุฑููุฒ ุงูุญุงูุฉ (HTTP Status Codes)

| ุงูููุฏ | ุงูุญุงูุฉ | ุงููุตู |
|------|--------|------|
| `201` | Created | ุชู ุชุณุฌูู ุงูุนููู ุจูุฌุงุญ |
| `400` | Bad Request | ุทูุจ ุบูุฑ ุตุญูุญ (JSON ุบูุฑ ุตุงูุญ) |
| `401` | Unauthorized | API Key ููููุฏ |
| `403` | Forbidden | API Key ุบูุฑ ุตุญูุญ |
| `422` | Unprocessable Entity | ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ (validation errors) |
| `429` | Too Many Requests | ุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ ูู ุงูุทูุจุงุช |
| `500` | Internal Server Error | ุฎุทุฃ ูู ุงูุฎุงุฏู |

---

## โก 7. ูุนูููุงุช ุฅุถุงููุฉ

### Rate Limiting (ุญุฏ ุงูุทูุจุงุช)

- **ุงูุญุฏ ุงูุงูุชุฑุงุถู:** 60 ุทูุจ ูู ุงูุฏูููุฉ ููู API Key
- ุฅุฐุง ุชุฌุงูุฒุช ุงูุญุฏุ ุณุชุญุตู ุนูู ุงุณุชุฌุงุจุฉ `429 Too Many Requests`
- ูููู ุฒูุงุฏุฉ ุงูุญุฏ ุจุงูุชูุณูู ูุน ูุฑูู CRM

### ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ (Sandbox)

**ูุชููุฑุฉ:** ูุนู  
**ุงูุฑุงุจุท:**
```
https://staging-crm.your-domain.com/api/public/v1/leads
```

**API Key ููุงุฎุชุจุงุฑ:** ุณูุชู ุชุฒููุฏู ุจู ูู ูุจู ูุฑูู CRM

### ุจูุฆุฉ ุงูุฅูุชุงุฌ (Production)

**ุงูุฑุงุจุท:**
```
https://crm.your-domain.com/api/public/v1/leads
```

**API Key ููุฅูุชุงุฌ:** ุณูุชู ุชุฒููุฏู ุจู ูู ูุจู ูุฑูู CRM (ูุฎุชูู ุนู ููุชุงุญ ุงูุงุฎุชุจุงุฑ)

---

## ๐๏ธ 8. ุงุณุชูุดุงู ุงูุฃุฎุทุงุก (Troubleshooting)

### ุงููุดููุฉ: "API Key ูุทููุจ"

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฅุฑุณุงู ุงูู API Key ูู ุงูู Header: `X-API-Key: your_key`
- ุชุญูู ูู ุนุฏู ูุฌูุฏ ูุณุงูุงุช ุฒุงุฆุฏุฉ ูู ุงูู Key

### ุงููุดููุฉ: "ุฑูู ุงูุฌูุงู ูุณุฌู ูุณุจูุงู"

**ุงูุญู:**
- ูุฐุง ุงูุฑูู ููุฌูุฏ ุจุงููุนู ูู ุงููุธุงู
- ููููู ุฅุจูุงุบ ุงูุนููู ุจุฃูู ูุณุฌู ูุณุจูุงู
- ุฃู ุชุญุฏูุซ ุจูุงูุงุชู (ูุชุทูุจ endpoint ูุฎุชูู)

### ุงููุดููุฉ: "ุฑูู ุงูุฌูุงู ุบูุฑ ุตุญูุญ"

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู ุงูุฑูู ุจุตูุบุฉ ุณุนูุฏูุฉ ุตุญูุญุฉ
- ุฃูุซูุฉ ุตุญูุญุฉ: `0501234567`, `+966501234567`, `00966501234567`

### ุงููุดููุฉ: CORS Error (ูู ุงููุชุตูุญ)

**ุงูุญู:**
- ุชูุงุตู ูุน ูุฑูู CRM ูุฅุถุงูุฉ ูุทุงู ูููุนู ุฅูู ูุงุฆูุฉ ุงูู CORS ุงููุณููุญุฉ
- ุณูุชู ุฅุถุงูุฉ: `Access-Control-Allow-Origin: https://your-website.com`

---

## ๐ 9. ุงูุฏุนู ุงูููู

ูู ุญุงู ูุงุฌูุช ุฃู ูุดููุฉ ุฃู ูุฏูู ุงุณุชูุณุงุฑ:

- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** support@crm-wakeel.com
- **ุงููุงุชู:** +966 XX XXX XXXX
- **ุณุงุนุงุช ุงูุนูู:** ุงูุฃุญุฏ - ุงูุฎููุณ (9 ุตุจุงุญุงู - 5 ูุณุงุกู)

---

## ๐ 10. ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู:**
   - ูุง ุชุดุงุฑู ุงูู API Key ุนููุงู
   - ูุง ุชุถุนู ูู ุงูููุฏ ุงููุฑุฆู ูููุณุชุฎุฏููู (Frontend)
   - ุงุณุชุฎุฏู Server-Side Processing ูุฅุฑุณุงู ุงูุจูุงูุงุช

2. **ุงูุฃุฏุงุก:**
   - ูููุถู ุฅุฑุณุงู ุงูุทูุจุงุช ุจุดูู ุบูุฑ ูุชุฒุงูู (Asynchronous)
   - ูุง ุชูุชุธุฑ ุงูุงุณุชุฌุงุจุฉ ูุฅุธูุงุฑ ุฑุณุงูุฉ ูููุณุชุฎุฏู (ุงุณุชุฎุฏู AJAX)

3. **ุงูุชุชุจุน:**
   - ุงุญุชูุธ ุจู `lead_id` ุงูููุฑุฌุน ูุชุชุจุน ุงูุนููู ูุงุญูุงู
   - ููููู ุงุณุชุฎุฏุงูู ููุงุณุชุนูุงู ุนู ุญุงูุฉ ุงูุนููู (ูุชุทูุจ endpoint ุฅุถุงูู)

---

**ุชู ุฅุนุฏุงุฏ ูุฐุง ุงููุณุชูุฏ ุจูุงุณุทุฉ:** ูุฑูู CRM Wakeel  
**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-24
